---
import { getCollection, getEntry } from "astro:content"
import PageLayout from "@/layouts/page.astro"
import SiteFooter from "@/components/site-footer.astro"
import SiteLogo from "@/components/site-logo.astro"
const slug = Astro.params.slug
if (!slug) {
  throw new Error("No slug provided")
}

const entry = await getEntry("newsletter", slug)
const rendered = await entry?.render()

export const getStaticPaths = async () =>
  (await getCollection("newsletter")).map((post) => ({
    params: { slug: post.slug },
    props: { entry: post },
  }))
---

<PageLayout title={entry?.slug}>
  <article class="prose bg-stone-50 p-4">
    {rendered && <rendered.Content />}
  </article>
  <SiteFooter>
    <SiteLogo />
  </SiteFooter>
</PageLayout>
